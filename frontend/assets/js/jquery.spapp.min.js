!function(t){"use strict";var e={_routes:{},_routeDefault:"",_routeError:"",_currentController:null,_routeHooks:{},_anchors:{},init:function(o){this._routeDefault=o.defaultView||"",this._routeError=o.errorView||"",this._anchors=o.anchors||{};if(o.routes)for(var r in o.routes)this._routes[r]=o.routes[r];var n=this;return t(window).on("hashchange",function(){n.run()}),t(document).on("click",'a[href^="#"]',function(e){var o=t(this).attr("href");o&&"#"!==o&&(window.location.hash=o)}),this.run(),this},route:function(t){var e=t.view||"";return this._routes[e]={view:t.view,load:t.load,onCreate:t.onCreate,onReady:t.onReady},this},run:function(){var e=window.location.hash.replace("#","").split("?")[0].split("/")[0]||this._routeDefault,o=this._routes[e];if(!o&&this._routeError&&(e=this._routeError,o=this._routes[e]),!o)return void console.error("SPApp: Route not found for hash: "+e);o.onCreate&&"function"==typeof o.onCreate&&o.onCreate();if(o.load){var r=this._anchors.main||"#main",n=this;t(r).load(o.load,function(t,e){"error"===e?console.error("SPApp: Failed to load view: "+o.load):(o.onReady&&"function"==typeof o.onReady&&o.onReady(),window.scrollTo(0,0))})}return this._currentController=e,this},getCurrentController:function(){return this._currentController},loadView:function(t){return window.location.hash="#"+t,this}};t.spapp=e}(jQuery);
